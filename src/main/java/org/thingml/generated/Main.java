/**
 * File generated by the ThingML IDE
 * /!\Do not edit this file/!\
 * In case of a bug in the generated code,
 * please submit an issue on our GitHub
 **/

package org.thingml.generated;

import org.thingml.java.*;
import org.thingml.java.ext.*;

import org.thingml.generated.api.*;
import org.thingml.generated.messages.*;

import java.util.*;
public class Main {
//Things
public static PingServer PingServer_PingPongCfg_server1;
public static PingClient PingClient_PingPongCfg_client2;
public static PingClient PingClient_PingPongCfg_client1;
public static PingServer PingServer_PingPongCfg_server2;
public static void main(String args[]) {
//Things
PingClient_PingPongCfg_client2 = (PingClient) new PingClient("PingPongCfg_client2: PingClient").buildBehavior();
PingClient_PingPongCfg_client1 = (PingClient) new PingClient("PingPongCfg_client1: PingClient").buildBehavior();
PingServer_PingPongCfg_server1 = (PingServer) new PingServer("PingPongCfg_server1: PingServer").buildBehavior();
PingServer_PingPongCfg_server2 = (PingServer) new PingServer("PingPongCfg_server2: PingServer").buildBehavior();
//Connectors
new Connector(PingClient_PingPongCfg_client1.getPing_service_port(), PingServer_PingPongCfg_server2.getPing_service_port(), PingClient_PingPongCfg_client1, PingServer_PingPongCfg_server2);
new Connector(PingClient_PingPongCfg_client2.getPing_service_port(), PingServer_PingPongCfg_server1.getPing_service_port(), PingClient_PingPongCfg_client2, PingServer_PingPongCfg_server1);
new Connector(PingClient_PingPongCfg_client1.getPing_service_port(), PingServer_PingPongCfg_server1.getPing_service_port(), PingClient_PingPongCfg_client1, PingServer_PingPongCfg_server1);
//Starting Things
PingClient_PingPongCfg_client2.init();
PingServer_PingPongCfg_server2.init();
PingClient_PingPongCfg_client1.init();
PingServer_PingPongCfg_server1.init();
PingServer_PingPongCfg_server1.start();
PingServer_PingPongCfg_server2.start();
PingClient_PingPongCfg_client2.start();
PingClient_PingPongCfg_client1.start();
Runtime.getRuntime().addShutdownHook(new Thread() {
public void run() {
System.out.println("Terminating ThingML app...");PingClient_PingPongCfg_client2.stop();
PingClient_PingPongCfg_client1.stop();
PingServer_PingPongCfg_server2.stop();
PingServer_PingPongCfg_server1.stop();
System.out.println("ThingML app terminated. RIP!");}
});

}
}
